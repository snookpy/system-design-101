<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-async and concurrency/concurrency" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Concurrency | System Design Fundamentals</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://snookpy.github.io/system-design-101/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://snookpy.github.io/system-design-101/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://snookpy.github.io/system-design-101/docs/async and concurrency/concurrency"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Concurrency | System Design Fundamentals"><meta data-rh="true" name="description" content="- Multithreading Multithreading is the ability of a central processing unit (CPU) (or a single core in a multi-core processor) to provide multiple threads of execution concurrently, supported by the operating system. A thread is the smallest sequence of programmed instructions that can be managed independently by a scheduler."><meta data-rh="true" property="og:description" content="- Multithreading Multithreading is the ability of a central processing unit (CPU) (or a single core in a multi-core processor) to provide multiple threads of execution concurrently, supported by the operating system. A thread is the smallest sequence of programmed instructions that can be managed independently by a scheduler."><link data-rh="true" rel="icon" href="/system-design-101/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://snookpy.github.io/system-design-101/docs/async and concurrency/concurrency"><link data-rh="true" rel="alternate" href="https://snookpy.github.io/system-design-101/docs/async and concurrency/concurrency" hreflang="en"><link data-rh="true" rel="alternate" href="https://snookpy.github.io/system-design-101/docs/async and concurrency/concurrency" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Concurrency","item":"https://snookpy.github.io/system-design-101/docs/async and concurrency/concurrency"}]}</script><link rel="alternate" type="application/rss+xml" href="/system-design-101/blog/rss.xml" title="System Design Fundamentals RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/system-design-101/blog/atom.xml" title="System Design Fundamentals Atom Feed"><link rel="stylesheet" href="/system-design-101/assets/css/styles.69ddde23.css">
<script src="/system-design-101/assets/js/runtime~main.66a4d446.js" defer="defer"></script>
<script src="/system-design-101/assets/js/main.a83c7f32.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/system-design-101/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/system-design-101/"><div class="navbar__logo"><img src="/system-design-101/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/system-design-101/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">System Design 101</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/system-design-101/docs/intro">Tutorial</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/snookpy" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/system-design-101/docs/intro">System design fundamentals</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/system-design-101/docs/cap-theory">CAP Theory</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/system-design-101/docs/load balancing/intro">load balancing</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/system-design-101/docs/api-gateway">API Gateway</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/system-design-101/docs/bloom filter">Bloom Filters (TODO)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/system-design-101/docs/domain name system">Domain Name System (DNS)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/system-design-101/docs/caching">Caching</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/system-design-101/docs/Indexes">Indexes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/system-design-101/docs/security">Security</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/system-design-101/docs/async and concurrency/concurrency">async and concurrency</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/system-design-101/docs/async and concurrency/concurrency">Concurrency</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/system-design-101/docs/async and concurrency/async programming">Async Programming</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/system-design-101/docs/async and concurrency/synchronization constructs">Synchronization Constructs</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/system-design-101/docs/networks/http-vs-https">networks</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/system-design-101/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">async and concurrency</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Concurrency</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Concurrency</h1></header>
<ul>
<li><strong>Multithreading</strong> Multithreading is the ability of a central processing unit (CPU) (or a single core in a multi-core processor) to provide multiple threads of execution concurrently, supported by the operating system. A thread is the smallest sequence of programmed instructions that can be managed independently by a scheduler.</li>
<li><strong>Concurrency</strong> is the execution of multiple instruction sequences at the same time. It happens in the operating system when there are several process threads running in parallel. The running process threads always communicate with each other through shared memory or message passing. Concurrency results in sharing of resources, in turn making the system efficient.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="blocks-of-modern-concurrency">Blocks of modern concurrency<a href="#blocks-of-modern-concurrency" class="hash-link" aria-label="Direct link to Blocks of modern concurrency" title="Direct link to Blocks of modern concurrency">​</a></h2>
<ol>
<li><strong>Programs</strong>: Set of instructions that perform a specific task when executed by a computer. It is a static entity that remains inactive until executed.</li>
<li><strong>Process</strong>: When run or execute a program, it becomes a process. This is the active phase of the program, using memory and other system resources. If a program is an inactive entity stored on a hard drive, a process is its active state when it&#x27;s executed and begins its operations.</li>
<li><strong>Thread</strong>: Threads are parts of a process. A single process might split its task into multiple threads to work faster or more efficiently. While all threads in a process share the same resources, each thread works on its own individual task</li>
</ol>
<p><img decoding="async" loading="lazy" alt="Program-Process-Thread" src="/system-design-101/assets/images/program_process_thread-0a02eccc9f6b97fd3927176d4a9c8364.gif" width="1080" height="756" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="thread-life-cycle-with-concurrency">Thread Life Cycle with Concurrency<a href="#thread-life-cycle-with-concurrency" class="hash-link" aria-label="Direct link to Thread Life Cycle with Concurrency" title="Direct link to Thread Life Cycle with Concurrency">​</a></h2>
<p><strong>New:</strong> This is the phase where a thread is created but hasn’t started running. At this point, the thread is considered not alive.</p>
<p><strong>Runnable:</strong> The thread is ready to run and is waiting for the CPU’s attention. Proper management of runnable threads ensures no thread has to wait too long, enabling faster results.</p>
<p><strong>Running:</strong> The thread is executing its tasks. This state allows multiple threads to operate simultaneously, reducing overall processing time. The thread can move out of the Running state for various reasons, such as waiting for resources or yielding control to another thread.</p>
<p><strong>Blocked/Waiting:</strong> The thread is in a waiting state; it is waiting on other threads to complete their tasks or some external actions.</p>
<p><strong>Terminated:</strong> The thread has completed its tasks and exited. Managing this state well is essential for freeing up system resources.</p>
<p><img decoding="async" loading="lazy" alt="Thread Life Cycle" src="/system-design-101/assets/images/thread_life_cycle-1b134b9afb50d7364b0f9bbb0584873a.gif" width="1080" height="756" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="components-of-threads">Components of Threads<a href="#components-of-threads" class="hash-link" aria-label="Direct link to Components of Threads" title="Direct link to Components of Threads">​</a></h2>
<ol>
<li><strong>Stack Space</strong>: Provides temporary data storage for thread operations.</li>
<li><strong>Program Counter</strong>: Maintains the current position of the thread within its assigned task.</li>
<li><strong>Register Set</strong>: Stores the thread&#x27;s current working variables and state.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="types-of-threads">Types of Threads<a href="#types-of-threads" class="hash-link" aria-label="Direct link to Types of Threads" title="Direct link to Types of Threads">​</a></h2>
<ol>
<li><strong>User-Level Threads (ULT)</strong>:<!-- -->
<ul>
<li>Operated and managed at the user level, invisible to the operating system, facilitating faster operations and easier management.</li>
<li>However, the entire process can become unresponsive if one thread encounters a blocking issue.</li>
</ul>
</li>
<li><strong>Kernel-Level Threads (KLT)</strong>: Managed directly by the operating system, integral for system stability and individual thread recovery without affecting others.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="forkjoin-model">Fork/Join Model<a href="#forkjoin-model" class="hash-link" aria-label="Direct link to Fork/Join Model" title="Direct link to Fork/Join Model">​</a></h2>
<p>The Fork/Join model is a parallel programming framework that allows tasks to be divided into smaller subtasks (forked) and then combined (joined) to produce a final result.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="initial-setup-the-master-thread">Initial Setup: The Master Thread<a href="#initial-setup-the-master-thread" class="hash-link" aria-label="Direct link to Initial Setup: The Master Thread" title="Direct link to Initial Setup: The Master Thread">​</a></h3>
<ul>
<li>The process begins with a single, primary thread - often referred to as the master thread.</li>
<li>This master thread runs through the initial part of the program, executing tasks sequentially.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="forking-creating-subtasks">Forking: Creating Subtasks<a href="#forking-creating-subtasks" class="hash-link" aria-label="Direct link to Forking: Creating Subtasks" title="Direct link to Forking: Creating Subtasks">​</a></h3>
<ul>
<li>When the master thread encounters a task that can be parallelized, the master thread &quot;forks&quot; the task into multiple subtasks.</li>
<li>Each of these subtasks takes on a portion of the workload, running concurrently with others.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="concurrent-execution-working-in-parallel">Concurrent Execution: Working in Parallel<a href="#concurrent-execution-working-in-parallel" class="hash-link" aria-label="Direct link to Concurrent Execution: Working in Parallel" title="Direct link to Concurrent Execution: Working in Parallel">​</a></h3>
<ul>
<li>The master thread and the subtasks execute simultaneously.</li>
<li>This parallel execution allows for efficient utilization of system resources, as multiple tasks are handled at the same time.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="joining-combining-results">Joining: Combining Results<a href="#joining-combining-results" class="hash-link" aria-label="Direct link to Joining: Combining Results" title="Direct link to Joining: Combining Results">​</a></h3>
<ul>
<li>Once the subtasks complete their execution, they &quot;join&quot; back.</li>
<li>&quot;Joining&quot; involves terminating the subtasks and combining their results back to master thread.</li>
<li>The master thread then continues with the next part, now with the results or effects of the parallel tasks integrated.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="repeat-for-efficiency">Repeat for efficiency<a href="#repeat-for-efficiency" class="hash-link" aria-label="Direct link to Repeat for efficiency" title="Direct link to Repeat for efficiency">​</a></h3>
<ul>
<li>The Fork/Join cycle can repeated multiple times throughout the program.</li>
<li>The master thread can dynamically spawn and terminate threads based on the computational demands, optimizing resource usage.</li>
</ul>
<!-- -->
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="example-create-thread-in-c">Example Create Thread in C#<a href="#example-create-thread-in-c" class="hash-link" aria-label="Direct link to Example Create Thread in C#" title="Direct link to Example Create Thread in C#">​</a></h2>
<div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">using System;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using System.Threading;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Program</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   static void Work()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       Console.WriteLine(&quot;Hello from thread&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   static void Main()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       Thread thread = new Thread(Work);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       thread.Start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       // Wait for the thread to complete</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       thread.Join();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       Console.WriteLine(&quot;Thread has completed.&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="critical-section">Critical Section<a href="#critical-section" class="hash-link" aria-label="Direct link to Critical Section" title="Direct link to Critical Section">​</a></h2>
<p>A critical section is a part of a program that accesses shared resources (like shared data structures or files) and must not be concurrently accessed by more than one thread of execution.</p>
<div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">using System;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using System.Threading;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Program</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static int counter = 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static readonly object lockObject = new object();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    static void IncrementCounter()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (int i = 0; i &lt; 100000; i++)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            lock (lockObject) // Entering critical section</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                counter++;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } // Exiting critical section</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    static void Main()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Thread thread1 = new Thread(IncrementCounter);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Thread thread2 = new Thread(IncrementCounter);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        thread1.Start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        thread2.Start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        thread1.Join();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        thread2.Join();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Console.WriteLine($&quot;Final Counter Value: {counter}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="race-condition">Race Condition<a href="#race-condition" class="hash-link" aria-label="Direct link to Race Condition" title="Direct link to Race Condition">​</a></h2>
<p>A phenomenon that occurs when multiple threads access shared data and try to change it at the same time. If the access to the shared data is not properly synchronized, it can lead to inconsistent or incorrect results.</p>
<!-- -->
<ol>
<li>Thread1 and Thread2 both read the counter at the same time → both see 0.</li>
<li>Both increment their local copy → both now have 1.</li>
<li>Both write back to the shared counter → last writer wins, overwriting the first.</li>
<li>Result → The counter is 1 instead of 2.</li>
</ol></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/system-design-101/docs/security"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Security</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/system-design-101/docs/async and concurrency/async programming"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Async Programming</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#blocks-of-modern-concurrency" class="table-of-contents__link toc-highlight">Blocks of modern concurrency</a></li><li><a href="#thread-life-cycle-with-concurrency" class="table-of-contents__link toc-highlight">Thread Life Cycle with Concurrency</a></li><li><a href="#components-of-threads" class="table-of-contents__link toc-highlight">Components of Threads</a></li><li><a href="#types-of-threads" class="table-of-contents__link toc-highlight">Types of Threads</a></li><li><a href="#forkjoin-model" class="table-of-contents__link toc-highlight">Fork/Join Model</a><ul><li><a href="#initial-setup-the-master-thread" class="table-of-contents__link toc-highlight">Initial Setup: The Master Thread</a></li><li><a href="#forking-creating-subtasks" class="table-of-contents__link toc-highlight">Forking: Creating Subtasks</a></li><li><a href="#concurrent-execution-working-in-parallel" class="table-of-contents__link toc-highlight">Concurrent Execution: Working in Parallel</a></li><li><a href="#joining-combining-results" class="table-of-contents__link toc-highlight">Joining: Combining Results</a></li><li><a href="#repeat-for-efficiency" class="table-of-contents__link toc-highlight">Repeat for efficiency</a></li></ul></li><li><a href="#example-create-thread-in-c" class="table-of-contents__link toc-highlight">Example Create Thread in C#</a></li><li><a href="#critical-section" class="table-of-contents__link toc-highlight">Critical Section</a></li><li><a href="#race-condition" class="table-of-contents__link toc-highlight">Race Condition</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/system-design-101/docs/intro">Tutorial</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://x.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/system-design-101/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>